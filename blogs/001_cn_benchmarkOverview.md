## 数据库行业排名榜简述

数据库大概是最早“卷”榜单排名的软件行业了，至少有三十年的历史。大部分用户包括圈内的数据库专家，也许没有能力或没有权限去研读数据库内核的code，也许没有时间或资源去试水和实际使用的诸多数据。于是查看一个用排名和分数体系数据库能力的榜单，也是便形成一个**合理**的取舍。本文介绍一下常常被业界提及的四个。

#### 一、Gartner 数据库魔力象限  ⭐⭐⭐⭐⭐

* 国际影响力：5
* 国内影响力：5
* 投入成本：5
* 费用/成本：几十万美金
* 认可度/趋势：最高/保持
* 透明度：3
* 特点：商业性

![](./images/Gartner.png)

全称《云数据库管理系统魔力象限》Magic Quadrant for Cloud Database Management Systems。

魔力象限2023在12月中旬发布，算是数据库圈中最近两三个月的一件大事儿了。各种硬文软文很多已经走了三轮了。排在比较高或者上升趋势的厂家肯定会极力的推崇，而排的较低尤其是走下降趋势的自然会低调处理。同样是“荣誉提及”已经是几家欢乐几家愁了。

在诸多咨询公司中（IDC, Forrester）, 魔力象限是数据库厂家最重视的。这是一个相辅相成的过程，就好像世界杯必须有巴西阿根廷一样。同时它评估的特点很重视商业的成功，也就是执行力。所以我们不会看到开源产项目，如MySQL, PostgreSQL, Spark, 而是其相关的商业公司。

同时这一个榜单也是历时几十年的演变过程，倾向于比较传统的保守，其规则黑盒主观因素不少，但公允性的口碑又很不错。顺便说一个路边社的八卦。大部分圈内人士也都没有注意到：惯例是12月中旬正式发布，也就是2023年12月15号。但是本次推迟到了而是转到了第2周，这在欧美环境中其实是不多的，因为那一周按理说都已经放假，大家回家玩去了。路边社消息是某一个厂家对于排名或者说评价有质疑，所以耽误了一点时间。另一个数据可以看到，这个报告中有一个微小的错误。魔力象限上只列了19个，而在第3页中还是说的20。



#### 二、TPC benchmark  ⭐⭐⭐⭐
* 国际影响力：4
* 国内影响力：4
* 投入成本：5
* 组织者费用：5～20万美金 （真实成本：$0.5～1M+)
* 认可度/趋势：中高/下降
* 透明度：5 (https://www.tpc.org/tpc_documents_current_versions/current_specifications5.asp)
* 特点：考察性价比

![](./images/TPC-reg.gif)

大家经常提及的关系数据库跑分就是TPC-C(1992), TPC-H(1999), TPC-E(2006)和TPC-DS(2011)。其中TPC-C(还有SysBench)和TPC-H使用的相对较多。尽管TPC与时共进的增添了大数据，IOT等新的benchmark, 其权威性都无法追上上面列举的90年代和00年代的辉煌。具体国内的情况，上世纪的TPCC和TPCH更“火”一些，其中一个重要原因是：TPC-C和TPC-H是相对（TPC-E和TPC-DS）简单的TP和AP benchmark，比较容易满足审核要求。

**审核**其实是上榜TPC的关键。TPC提供数据表格schema和数据生成标准，和测试要求，但不提供测试框架。运行TPC-C容易，搭建满足**审核**要求的测试框架难。而且，由于TPC在过去十多年中趋于下降，硅谷的公司很少花钱参与正式的评测和审核。其auditor只剩下一个，又形成了事实上的“垄断”。

中国公司正式打榜的时候，就会面临多重困难。硬实力方面，比如数据库能力，资源的使用，SQL语法的兼容，能否长时间稳定运行，测试框架是否robust; 软实力方面，如何同auditor沟通，三五次反复测试，根据反馈改动数据库引擎和测试框架。所以打一次榜的成本非常高，包括硬件，数据库内核开发，测试框架开发，auditor费用等等。笔者曾经问过打榜成功的朋友，据说如果希望结果能拿得出手的话，预算要到(rmb)百万～千万级。

当然，门槛高的好处是，一担上榜，就证明了该数据库的整体实力在国内进入第一集团。


#### 三、DB-Engine  ⭐⭐⭐
* 国际影响力：4
* 国内影响力：4
* 投入成本：1
* 组织者费用：几百～几千美金
* 认可度/趋势：中/上升
* 透明度：5 （https://db-engines.com/en/ranking_definition）
* 特点：兼并包容 （417 systems in ranking, Feb 2024）

![](./images/db-engines.png)

DB-Engine体现的是人气（popularity）。如果想加入评比（而数据库本身又比较小众的话），手续非常简单，它会收的收费$500~600的入场费。这是2019～20标准，笔者团队就是这样把某大厂核心数据库搬上的。DB-Engine的另一个收入就是广告，费用不菲，也透明（https://db-engines.com/en/services）

具体排名算法也是很透明的，用网站上提及系统的次数，以搜索引擎查询中的结果数正则化（normalization）来衡量，包括： 

*  **搜索引擎** Google 和 Bing
* **普遍感兴趣** Google Trends 
* **技术论坛讨论** Stack Overflow 和 DBA Stack Exchange
* **工作机会** Indeed 和 Simply Hired
* **职业技能** Linkedin 
* **社交媒体** Twitter(X) 

上面的算法，在规则透明的基础上，造成了两大偏差和一个落后：

* 第一，不考虑数据库系统背后的商业支持，所以通常是开源的MySQL和PG各领风骚，而商业成功的如Aurora(48)和Snowflake(9)不可能称为年度数据库；
* 第二，大家也就理解为什么主打中国本土市场的数据库在排名上的落后， 排名最高的TiDB（80）全力海外市场3～4年，TDEngine在其CEO两年主攻海外的情况先还在百名之外，国内大厂领跑者PolarDB(276)和OpenGuass(177)是在popularity的维度，是无足轻重的地位。作为重要的补充，我们可以参考下面这个排名。
* 第三，多年积累的声誉，也是其发展的累赘。比如没有包括新的hacknews, discord, slack。




#### 四、摩天轮数据库 ⭐⭐ 
全名《摩天轮中国数据库流行度排行》

* 国际影响力：0
* 国内影响力：4
* 投入成本：2
* 组织者费用：未知
* 国内认可度/趋势：中高/增加
* 透明度：5 （https://www.modb.pro/db/189802）
* 特点：面向国产/中国数据库 

![](./images/Modblogo.png)

摩天轮同样体现人气，设计和算法与DB-Engine基本一致， 2024年2月报告包括290个数据库。数据从九个维度计算：搜索引擎（百度、必应、谷歌），趋势指数（微信指数、百度指数、谷歌趋势、360趋势数据）， 资质数量， 核心案例数（摩天轮自己整理），专利数，论文数（《中国计算机学会推荐国际学术会议和期刊目录（2022）》），招聘岗位数（51JOB），书籍（摩天轮自己整理），墨天轮内容数量。

与DB-Engine相比，摩天轮对于中国本土数据库的评价更加完善，是有益的补充。同时也有两大偏差和一个缺憾：

* 第一，（对比 DB-Engine)表面上维度多了，数据全面了。但其可操作空间也多了。比如专利，IBM的专利一直是领先的，但其数据库在过去20年的颓势明显，而且开源社区大部分是不写专利的；PolarDB在二月份的榜单中显示592个专利，70篇论文，如果看看细节，其中很有一些缺乏与PolarDB的直接相关性。
* 第二，墨天轮需要保证并且说服公众其排名的公允性。相对DB-Engines完全采用第三方的数据集，墨天轮自己整理1/3的数据，也采用自己的平台上热度数据，最敏感的是该公司自己的数据库也参与评比。作为裁判，既定规则，并且提供原始数据，又亲自下场比赛。因为没有遵循回避原则，即使内部并没有虚假，也容易被业界诟病。
* 第三，非常遗憾，没有公布其他非本土数据库在其算法中的分数和排名（这里不应该有任何技术难度）。大概是没有对比就没有伤害吧。举个例子，作为资深球迷，中国（特指男子）足球队内战赢多少次，都不如一年前输给越南和最近亚洲杯一球不进，让我们体会到差距。


缺憾归缺憾。爱因斯坦说：“所有的东西的是相对的” （老爱：我说过吗？）。摩天轮的排名在面向中国本土数据库方面，是权威的，有参考价值的。期待它能摆脱主观因素，更进一步。




#### 五、尾巴

**Disclaimer: 关于上面的四个评比，前三个笔者都有第一手经验， 第四个摩天轮没有亲力亲为，体感有限。**

排名是一个数据库系统成熟性的门槛，也是客户选择的重要参考指标。然而过度迷信排名，将驱使开发者去研究排名算法，比如买百度热点，或针对二十年前的TPC标准设计数据库（TPC的一个重要的问题是**pre-Cloud**的标准）。最终似乎公允透明的排名，成为生产力发展的阻碍。如同科举，曾经是中国政府活动中最为重视，最为公平的制度，时过境迁，也不可避免的成为阻碍中国发展富强的鸿沟。科举需要改进，数据库的评价体系和排行榜也需要与时共进。

---

2024年2月中完成，2024年3月底修订
